function video_ok(){$(".article-content embed, .article-content video, .article-content iframe").each(function(){var e=$(this).attr("width"),i=$(this).attr("height");i&&$(this).css("height",$(this).width()/(e/i))})}function playbox(e){if(e.indexOf("youku.com")>-1){var i=e.match("id_([^.]+).")[1];SpareYouku(i)}else $(".v-video-img").append('<a href="'+e+'" target="_blank">&nbsp;</a>'),$(".v-video-img").css("top","0")}function playerstop(){vnexturl=$(".relates li a")?$(".relates li a")[0].href:vcaturl,window.location.href=vnexturl}function SpareYouku(e){$.ajax({url:"//player.youku.com/jsapi",dataType:"script",cache:!0,success:function(){new YKU.Player("videoplayer",{styleid:"0",client_id:"c58daf83bd7e7d2a",vid:e,newPlayer:!0,autoplay:!0,show_related:!1,events:{onPlayEnd:function(){playerstop()}}})}})}function scrollTo(e,i,t){t||(t=300),e?$(e).length>0&&$("html,body").animate({scrollTop:$(e).offset().top+(i||0)},t):$("html,body").animate({scrollTop:0},t)}function is_name(e){return/.{2,12}$/.test(e)}function is_url(e){return/^((http|https)\:\/\/)([a-z0-9-]{1,}.)?[a-z0-9-]{2,}.([a-z0-9-]{1,}.)?[a-z0-9]{2,}$/.test(e)}function is_qq(e){return/^[1-9]\d{4,13}$/.test(e)}function is_mail(e){return/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(e)}function strToDate(e,i){i||(i="yyyy-MM-dd hh:mm:ss"),e=new Date(1e3*e);var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var s in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+s+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?t[s]:("00"+t[s]).substr((""+t[s]).length)));return i}function like(){$.cookie("like-"+vpid)||$(".action-like").click(function(e){$.post("/api/click?down=1&id="+vpid,function(i){$("#diggnum").html(i),$.cookie("like-"+vpid,1,{expires:1}),$(this).unbind(e)})})}if(window.console||(window.console={log:function(){}}),jQuery.cookie=function(e,i,t){var s,a,n,o,l,r,c,d,h;if(void 0===i){if(r=null,document.cookie&&""!=document.cookie)for(c=document.cookie.split(";"),d=0;d<c.length;d++)if(h=jQuery.trim(c[d]),h.substring(0,e.length+1)==e+"="){r=decodeURIComponent(h.substring(e.length+1));break}return r}t=t||{},null===i&&(i="",t.expires=-1),s="",t.expires&&("number"==typeof t.expires||t.expires.toUTCString)&&("number"==typeof t.expires?(a=new Date,a.setTime(a.getTime()+864e5*t.expires)):a=t.expires,s="; expires="+a.toUTCString()),n=t.path?"; path="+t.path:"",o=t.domain?"; domain="+t.domain:"",l=t.secure?"; secure":"",document.cookie=[e,"=",encodeURIComponent(i),s,n,o,l].join("")},jsui={},jsui.bd=$("body"),jsui.is_signin=!!jsui.bd.hasClass("logged-in"),jsui.roll=["1","2"],jsui.uri="/skin/zgwdy",$(".widget-nav").length&&$(".widget-nav li").each(function(e){$(this).hover(function(){$(this).addClass("active").siblings().removeClass("active"),$(".widget-navcontent .item:eq("+e+")").addClass("active").siblings().removeClass("active")})}),$(".sns-wechat").length&&$(".sns-wechat").on("click",function(){var e=$(this);$("#modal-wechat").length||$("body").append('                <div class="modal fade" id="modal-wechat" tabindex="-1" role="dialog" aria-hidden="true">                    <div class="modal-dialog" style="margin-top:200px;width:340px;">                        <div class="modal-content">                            <div class="modal-header">                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                                <h4 class="modal-title">'+e.attr("title")+'</h4>                            </div>                            <div class="modal-body" style="text-align:center">                                <img style="max-width:100%" src="'+e.data("src")+'">                            </div>                        </div>                    </div>                </div>            '),$("#modal-wechat").modal()}),$(".carousel").length){var el_carousel=$(".carousel");el_carousel.carousel({interval:4e3}),require(["hammer"],function(e){var i=new e(el_carousel[0]);i.on("panleft panright swipeleft swiperight",function(e){"swipeleft"==e.type||"panleft"==e.type?el_carousel.carousel("next"):"swiperight"!=e.type&&"panright"!=e.type||el_carousel.carousel("prev")})})}jsui.bd.append('    <div class="m-mask"></div>    <div class="rollbar"><ul>    <li><a href="javascript:(scrollTo());"><i class="fa fa-angle-up"></i></a><h6>去顶部<i></i></h6></li>    </ul></div>');var _wid=$(window).width();video_ok(),$(window).resize(function(e){_wid=$(window).width(),video_ok()});var scroller=$(".rollbar"),_fix=!(!jsui.bd.hasClass("nav_fixed")||jsui.bd.hasClass("page-template-navs"));$(window).scroll(function(){var e=document.documentElement.scrollTop+document.body.scrollTop;_fix&&e>0&&_wid>720?jsui.bd.addClass("nav-fixed"):jsui.bd.removeClass("nav-fixed"),e>200?scroller.fadeIn():scroller.fadeOut()}),$(".user-welcome").tooltip({container:"body",placement:"bottom"});var _sidebar=$(".sidebar");if(_wid>1024&&_sidebar.length){var h1=15,h2=30,rollFirst=_sidebar.find(".widget:eq("+(jsui.roll[0]-1)+")"),sheight=rollFirst.height();rollFirst.on("affix-top.bs.affix",function(){rollFirst.css({top:0}),sheight=rollFirst.height();for(var e=1;e<jsui.roll.length;e++){var i=jsui.roll[e]-1,t=_sidebar.find(".widget:eq("+i+")");t.removeClass("affix").css({top:0})}}),rollFirst.on("affix.bs.affix",function(){rollFirst.css({top:h1});for(var e=1;e<jsui.roll.length;e++){var i=jsui.roll[e]-1,t=_sidebar.find(".widget:eq("+i+")");t.addClass("affix").css({top:sheight+h2}),sheight+=t.height()+15}}),rollFirst.affix({offset:{top:_sidebar.height(),bottom:$(".footer").outerHeight()}})}if($(".plinks a").each(function(){var e=$(this).attr("href")+"/favicon.ico";$(this).prepend('<img src="'+e+'">')}),jsui.bd.hasClass("page-template-pagesuser-php")&&require(["user"],function(e){e.init()}),jsui.bd.hasClass("page-template-pagestheme-php")&&require(["theme"],function(e){e.init()}),jsui.bd.hasClass("page-template-pagesnavs-php")){var titles="",i=0;if($("#navs .items h2").each(function(){titles+='<li><a href="#'+i+'">'+$(this).text()+"</a></li>",i++}),$("#navs nav ul").html(titles),$("#navs .items a").attr("target","_blank"),$("#navs nav ul").affix({offset:{top:$("#navs nav ul").offset().top,bottom:$(".footer").height()+2*$(".footer").css("padding-top").split("px")[0]}}),location.hash){var index=location.hash.split("#")[1];$("#navs nav li:eq("+index+")").addClass("active"),$("#navs nav .item:eq("+index+")").addClass("active"),scrollTo("#navs .items .item:eq("+index+")")}$("#navs nav a").each(function(e){$(this).click(function(){scrollTo("#navs .items .item:eq("+$(this).parent().index()+")"),$(this).parent().addClass("active").siblings().removeClass("active")})})}if(jsui.bd.hasClass("search-results")){var val=$(".site-search-form .search-input").val(),reg=eval("/"+val+"/i");$(".excerpt h2 a, .excerpt .note").each(function(){$(this).html($(this).text().replace(reg,function(e){return"<b>"+e+"</b>"}))})}if($(".search-show").bind("click",function(){$(this).find(".fa").toggleClass("fa-remove"),jsui.bd.toggleClass("search-on"),jsui.bd.hasClass("search-on")&&($(".site-search").find("input").focus(),jsui.bd.removeClass("m-nav-show"))}),jsui.bd.append($(".site-navbar").clone().attr("class","m-navbar")),$(".m-icon-nav").on("click",function(){jsui.bd.addClass("m-nav-show"),$(".m-mask").show(),jsui.bd.removeClass("search-on"),$(".search-show .fa").removeClass("fa-remove")}),$(".m-mask").on("click",function(){$(this).hide(),jsui.bd.removeClass("m-nav-show")}),$(".article-content").length&&$(".article-content img").attr("data-tag","bdshare"),$(".bdsharebuttonbox").length)with($(".article-content").length&&$(".article-content img").data("tag","bdshare"),window._bd_share_config={common:{bdText:"",bdMini:"2",bdMiniList:!1,bdPic:"",bdStyle:"0",bdSize:"24"},share:[{bdCustomStyle:jsui.uri+"/css/share.css"}]},document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="/static/api/js/share.js?cdnversion="+~(-new Date/36e5)];$.fn.serializeObject=function(){var e={},i=this.serializeArray();return $.each(i,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$(function(){"undefined"!=typeof vurl&&(vurl=window.atob(vurl),playbox(vurl),$.post("/api/click?id="+vpid,function(e){$("#dviews").html(e)}),like())});